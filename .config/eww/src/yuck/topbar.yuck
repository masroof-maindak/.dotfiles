(include "./src/yuck/topbar/pointer-mode.yuck")
(include "./src/yuck/topbar/workspaces-niri.yuck")
(include "./src/yuck/topbar/battery.yuck")
(include "./src/yuck/topbar/window.yuck")
(include "./src/yuck/topbar/volume.yuck")
(include "./src/yuck/topbar/music.yuck")
(include "./src/yuck/topbar/time.yuck")
(include "./src/yuck/topbar/blf.yuck")

(defwindow topbar []
	:monitor 0
	:class "topbar_window"
	:namespace "eww bar"
	:exclusive true
    ; I have absolutely zero fucking idea how this height works...
	:geometry (geometry :height 864 :anchor "left center")
	(box
  	  	:class "topbar_box"
  	  	:orientation "v"
        (left)
        (middle)
        (right)))

(defwidget left []
  	(box
  	  	:orientation "v"
  	  	:valign "start"
  	  	:halign "center"
		:space-evenly false
		:spacing 4
  	  	(time_module)
        (sep)
  	  	(music_bar)
    ))

; TODO: make these prettier
; FIXME: this overflows when there are many columns
(defwidget right []
  	(box
  	  	:class "right_box"
  	  	:orientation "v"
  	  	:valign "end"
		(box
            :orientation "v"
            :valign "end"
			:space-evenly false
            :spacing 10
			(volume_module)
			(battery_module))
    ))

(defwidget middle []
  	(box
  	  	:orientation "v"
        :valign "center"
        :halign "center"
		(workspaces :monitor "eDP-1")
    ))

(defwidget sep []
	(box
		:valign "center"
		:orientation "v"
		:width 2
		:height 1
		:class "separ"))
